# ---- Dev image with fast reload ----
FROM python:3.13-alpine

RUN apk add --no-cache build-base libffi-dev musl-dev openssl-dev curl

WORKDIR /app
ENV PYTHONDONTWRITEBYTECODE=1 PYTHONUNBUFFERED=1

COPY requirements.txt .
RUN pip install --no-cache-dir --upgrade pip && \
    pip install --no-cache-dir -r requirements.txt

COPY app ./app

EXPOSE 8000
CMD ["sh", "-c", "fastapi dev app/main.py --host 0.0.0.0 --port ${PORT:-8000}"]
